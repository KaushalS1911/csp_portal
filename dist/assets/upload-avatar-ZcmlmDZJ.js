import{y as c,r as m,af as _r,j as p,S as B,n as Ne,w as x,d as Ee,e as W,Y as Pr,k as Cr,B as P,T as le,av as Sr,f as Ye}from"./index-cs8KH1Gj.js";import{a as sr}from"./format-number-DkNQnIoZ.js";import{v as Ge}from"./fade-YsdWEJJe.js";import{f as cr,F as qe}from"./file-thumbnail-NE2uG7uc.js";import{A as Ir}from"./index-nuAYcRns.js";import{I as lr}from"./image--etRdOrW.js";function kt(e,r,t,n){var i=arguments.length,o=i<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,r,t,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(o=(i<3?s(o):i>3?s(r,t,o):s(r,t))||o);return i>3&&o&&Object.defineProperty(r,t,o),o}function H(e,r,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function u(d){try{l(n.next(d))}catch(v){s(v)}}function g(d){try{l(n.throw(d))}catch(v){s(v)}}function l(d){d.done?o(d.value):i(d.value).then(u,g)}l((n=n.apply(e,r||[])).next())})}function N(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(l){return function(d){return g([l,d])}}function g(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=r.call(e,t)}catch(d){l=[6,d],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ve(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],s;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function Je(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))}var Tr=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function X(e,r){var t=Rr(e);if(typeof t.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof r=="string"?r:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Rr(e){var r=e.name,t=r&&r.lastIndexOf(".")!==-1;if(t&&!e.type){var n=r.split(".").pop().toLowerCase(),i=Tr.get(n);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}var kr=[".DS_Store","Thumbs.db"];function zr(e){return H(this,void 0,void 0,function(){return N(this,function(r){return ue(e)&&Mr(e.dataTransfer)?[2,Ur(e.dataTransfer,e.type)]:Lr(e)?[2,$r(e)]:Array.isArray(e)&&e.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Kr(e)]:[2,[]]})})}function Mr(e){return ue(e)}function Lr(e){return ue(e)&&ue(e.target)}function ue(e){return typeof e=="object"&&e!==null}function $r(e){return Fe(e.target.files).map(function(r){return X(r)})}function Kr(e){return H(this,void 0,void 0,function(){var r;return N(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return r=t.sent(),[2,r.map(function(n){return X(n)})]}})})}function Ur(e,r){return H(this,void 0,void 0,function(){var t,n;return N(this,function(i){switch(i.label){case 0:return e.items?(t=Fe(e.items).filter(function(o){return o.kind==="file"}),r!=="drop"?[2,t]:[4,Promise.all(t.map(Br))]):[3,2];case 1:return n=i.sent(),[2,Qe(ur(n))];case 2:return[2,Qe(Fe(e.files).map(function(o){return X(o)}))]}})})}function Qe(e){return e.filter(function(r){return kr.indexOf(r.name)===-1})}function Fe(e){if(e===null)return[];for(var r=[],t=0;t<e.length;t++){var n=e[t];r.push(n)}return r}function Br(e){if(typeof e.webkitGetAsEntry!="function")return Xe(e);var r=e.webkitGetAsEntry();return r&&r.isDirectory?pr(r):Xe(e)}function ur(e){return e.reduce(function(r,t){return Je(Je([],Ve(r),!1),Ve(Array.isArray(t)?ur(t):[t]),!1)},[])}function Xe(e){var r=e.getAsFile();if(!r)return Promise.reject("".concat(e," is not a File"));var t=X(r);return Promise.resolve(t)}function Wr(e){return H(this,void 0,void 0,function(){return N(this,function(r){return[2,e.isDirectory?pr(e):Hr(e)]})})}function pr(e){var r=e.createReader();return new Promise(function(t,n){var i=[];function o(){var s=this;r.readEntries(function(u){return H(s,void 0,void 0,function(){var g,l,d;return N(this,function(v){switch(v.label){case 0:if(u.length)return[3,5];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return g=v.sent(),t(g),[3,4];case 3:return l=v.sent(),n(l),[3,4];case 4:return[3,6];case 5:d=Promise.all(u.map(Wr)),i.push(d),o(),v.label=6;case 6:return[2]}})})},function(u){n(u)})}o()})}function Hr(e){return H(this,void 0,void 0,function(){return N(this,function(r){return[2,new Promise(function(t,n){e.file(function(i){var o=X(i,e.fullPath);t(o)},function(i){n(i)})})]})})}var Nr=function(e,r){if(e&&r){var t=Array.isArray(r)?r:r.split(","),n=e.name||"",i=(e.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return t.some(function(s){var u=s.trim().toLowerCase();return u.charAt(0)==="."?n.toLowerCase().endsWith(u):u.endsWith("/*")?o===u.replace(/\/.*$/,""):i===u})}return!0};function Ze(e){return qr(e)||Gr(e)||dr(e)||Yr()}function Yr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qr(e){if(Array.isArray(e))return Oe(e)}function er(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function rr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?er(Object(t),!0).forEach(function(n){fr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):er(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function fr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Q(e,r){return Qr(e)||Jr(e,r)||dr(e,r)||Vr()}function Vr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dr(e,r){if(e){if(typeof e=="string")return Oe(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Oe(e,r)}}function Oe(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Jr(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],i=!0,o=!1,s,u;try{for(t=t.call(e);!(i=(s=t.next()).done)&&(n.push(s.value),!(r&&n.length===r));i=!0);}catch(g){o=!0,u=g}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw u}}return n}}function Qr(e){if(Array.isArray(e))return e}var Xr="file-invalid-type",Zr="file-too-large",et="file-too-small",rt="too-many-files",tt=function(r){r=Array.isArray(r)&&r.length===1?r[0]:r;var t=Array.isArray(r)?"one of ".concat(r.join(", ")):r;return{code:Xr,message:"File type must be ".concat(t)}},tr=function(r){return{code:Zr,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},nr=function(r){return{code:et,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},nt={code:rt,message:"Too many files"};function gr(e,r){var t=e.type==="application/x-moz-file"||Nr(e,r);return[t,t?null:tt(r)]}function mr(e,r,t){if(z(e.size))if(z(r)&&z(t)){if(e.size>t)return[!1,tr(t)];if(e.size<r)return[!1,nr(r)]}else{if(z(r)&&e.size<r)return[!1,nr(r)];if(z(t)&&e.size>t)return[!1,tr(t)]}return[!0,null]}function z(e){return e!=null}function ot(e){var r=e.files,t=e.accept,n=e.minSize,i=e.maxSize,o=e.multiple,s=e.maxFiles,u=e.validator;return!o&&r.length>1||o&&s>=1&&r.length>s?!1:r.every(function(g){var l=gr(g,t),d=Q(l,1),v=d[0],O=mr(g,n,i),C=Q(O,1),S=C[0],I=u?u(g):null;return v&&S&&!I})}function pe(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function ce(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function or(e){e.preventDefault()}function it(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function at(e){return e.indexOf("Edge/")!==-1}function st(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return it(e)||at(e)}function _(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return r.some(function(u){return!pe(n)&&u&&u.apply(void 0,[n].concat(o)),pe(n)})}}function ct(){return"showOpenFilePicker"in window}function lt(e){if(z(e)){var r=Object.entries(e).filter(function(t){var n=Q(t,2),i=n[0],o=n[1],s=!0;return yr(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),s=!1),(!Array.isArray(o)||!o.every(vr))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),s=!1),s}).reduce(function(t,n){var i=Q(n,2),o=i[0],s=i[1];return rr(rr({},t),{},fr({},o,s))},{});return[{description:"Files",accept:r}]}return e}function ut(e){if(z(e))return Object.entries(e).reduce(function(r,t){var n=Q(t,2),i=n[0],o=n[1];return[].concat(Ze(r),[i],Ze(o))},[]).filter(function(r){return yr(r)||vr(r)}).join(",")}function pt(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function ft(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function yr(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function vr(e){return/^.*\.[\w]+$/.test(e)}var dt=["children"],gt=["open"],mt=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],yt=["refKey","onChange","onClick"];function vt(e){return xt(e)||bt(e)||hr(e)||ht()}function ht(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xt(e){if(Array.isArray(e))return _e(e)}function Ae(e,r){return Dt(e)||jt(e,r)||hr(e,r)||wt()}function wt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hr(e,r){if(e){if(typeof e=="string")return _e(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _e(e,r)}}function _e(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function jt(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],i=!0,o=!1,s,u;try{for(t=t.call(e);!(i=(s=t.next()).done)&&(n.push(s.value),!(r&&n.length===r));i=!0);}catch(g){o=!0,u=g}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw u}}return n}}function Dt(e){if(Array.isArray(e))return e}function ir(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ir(Object(t),!0).forEach(function(n){Pe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ir(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Pe(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function fe(e,r){if(e==null)return{};var t=At(e,r),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function At(e,r){if(e==null)return{};var t={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(r.indexOf(i)>=0)&&(t[i]=e[i]);return t}var Se=m.forwardRef(function(e,r){var t=e.children,n=fe(e,dt),i=de(n),o=i.open,s=fe(i,gt);return m.useImperativeHandle(r,function(){return{open:o}},[o]),_r.createElement(m.Fragment,null,t(y(y({},s),{},{open:o})))});Se.displayName="Dropzone";var br={disabled:!1,getFilesFromEvent:zr,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Se.defaultProps=br;Se.propTypes={children:c.func,accept:c.objectOf(c.arrayOf(c.string)),multiple:c.bool,preventDropOnDocument:c.bool,noClick:c.bool,noKeyboard:c.bool,noDrag:c.bool,noDragEventsBubbling:c.bool,minSize:c.number,maxSize:c.number,maxFiles:c.number,disabled:c.bool,getFilesFromEvent:c.func,onFileDialogCancel:c.func,onFileDialogOpen:c.func,useFsAccessApi:c.bool,autoFocus:c.bool,onDragEnter:c.func,onDragLeave:c.func,onDragOver:c.func,onDrop:c.func,onDropAccepted:c.func,onDropRejected:c.func,onError:c.func,validator:c.func};var Ce={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function de(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=y(y({},br),e),t=r.accept,n=r.disabled,i=r.getFilesFromEvent,o=r.maxSize,s=r.minSize,u=r.multiple,g=r.maxFiles,l=r.onDragEnter,d=r.onDragLeave,v=r.onDragOver,O=r.onDrop,C=r.onDropAccepted,S=r.onDropRejected,I=r.onFileDialogCancel,R=r.onFileDialogOpen,w=r.useFsAccessApi,M=r.autoFocus,Y=r.preventDropOnDocument,Z=r.noClick,G=r.noKeyboard,ee=r.noDrag,T=r.noDragEventsBubbling,q=r.onError,b=r.validator,V=m.useMemo(function(){return ut(t)},[t]),Te=m.useMemo(function(){return lt(t)},[t]),ge=m.useMemo(function(){return typeof R=="function"?R:ar},[R]),re=m.useMemo(function(){return typeof I=="function"?I:ar},[I]),D=m.useRef(null),F=m.useRef(null),jr=m.useReducer(Et,Ce),Re=Ae(jr,2),me=Re[0],A=Re[1],Dr=me.isFocused,ke=me.isFileDialogActive,te=m.useRef(typeof window<"u"&&window.isSecureContext&&w&&ct()),ze=function(){!te.current&&ke&&setTimeout(function(){if(F.current){var f=F.current.files;f.length||(A({type:"closeDialog"}),re())}},300)};m.useEffect(function(){return window.addEventListener("focus",ze,!1),function(){window.removeEventListener("focus",ze,!1)}},[F,ke,re,te]);var L=m.useRef([]),Me=function(f){D.current&&D.current.contains(f.target)||(f.preventDefault(),L.current=[])};m.useEffect(function(){return Y&&(document.addEventListener("dragover",or,!1),document.addEventListener("drop",Me,!1)),function(){Y&&(document.removeEventListener("dragover",or),document.removeEventListener("drop",Me))}},[D,Y]),m.useEffect(function(){return!n&&M&&D.current&&D.current.focus(),function(){}},[D,M,n]);var k=m.useCallback(function(a){q?q(a):console.error(a)},[q]),Le=m.useCallback(function(a){a.preventDefault(),a.persist(),ae(a),L.current=[].concat(vt(L.current),[a.target]),ce(a)&&Promise.resolve(i(a)).then(function(f){if(!(pe(a)&&!T)){var h=f.length,j=h>0&&ot({files:f,accept:V,minSize:s,maxSize:o,multiple:u,maxFiles:g,validator:b}),E=h>0&&!j;A({isDragAccept:j,isDragReject:E,isDragActive:!0,type:"setDraggedFiles"}),l&&l(a)}}).catch(function(f){return k(f)})},[i,l,k,T,V,s,o,u,g,b]),$e=m.useCallback(function(a){a.preventDefault(),a.persist(),ae(a);var f=ce(a);if(f&&a.dataTransfer)try{a.dataTransfer.dropEffect="copy"}catch{}return f&&v&&v(a),!1},[v,T]),Ke=m.useCallback(function(a){a.preventDefault(),a.persist(),ae(a);var f=L.current.filter(function(j){return D.current&&D.current.contains(j)}),h=f.indexOf(a.target);h!==-1&&f.splice(h,1),L.current=f,!(f.length>0)&&(A({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ce(a)&&d&&d(a))},[D,d,T]),ne=m.useCallback(function(a,f){var h=[],j=[];a.forEach(function(E){var J=gr(E,V),U=Ae(J,2),ve=U[0],he=U[1],be=mr(E,s,o),se=Ae(be,2),xe=se[0],we=se[1],je=b?b(E):null;if(ve&&xe&&!je)h.push(E);else{var De=[he,we];je&&(De=De.concat(je)),j.push({file:E,errors:De.filter(function(Or){return Or})})}}),(!u&&h.length>1||u&&g>=1&&h.length>g)&&(h.forEach(function(E){j.push({file:E,errors:[nt]})}),h.splice(0)),A({acceptedFiles:h,fileRejections:j,type:"setFiles"}),O&&O(h,j,f),j.length>0&&S&&S(j,f),h.length>0&&C&&C(h,f)},[A,u,V,s,o,g,O,C,S,b]),oe=m.useCallback(function(a){a.preventDefault(),a.persist(),ae(a),L.current=[],ce(a)&&Promise.resolve(i(a)).then(function(f){pe(a)&&!T||ne(f,a)}).catch(function(f){return k(f)}),A({type:"reset"})},[i,ne,k,T]),$=m.useCallback(function(){if(te.current){A({type:"openDialog"}),ge();var a={multiple:u,types:Te};window.showOpenFilePicker(a).then(function(f){return i(f)}).then(function(f){ne(f,null),A({type:"closeDialog"})}).catch(function(f){pt(f)?(re(f),A({type:"closeDialog"})):ft(f)?(te.current=!1,F.current?(F.current.value=null,F.current.click()):k(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):k(f)});return}F.current&&(A({type:"openDialog"}),ge(),F.current.value=null,F.current.click())},[A,ge,re,w,ne,k,Te,u]),Ue=m.useCallback(function(a){!D.current||!D.current.isEqualNode(a.target)||(a.key===" "||a.key==="Enter"||a.keyCode===32||a.keyCode===13)&&(a.preventDefault(),$())},[D,$]),Be=m.useCallback(function(){A({type:"focus"})},[]),We=m.useCallback(function(){A({type:"blur"})},[]),He=m.useCallback(function(){Z||(st()?setTimeout($,0):$())},[Z,$]),K=function(f){return n?null:f},ye=function(f){return G?null:K(f)},ie=function(f){return ee?null:K(f)},ae=function(f){T&&f.stopPropagation()},Ar=m.useMemo(function(){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=a.refKey,h=f===void 0?"ref":f,j=a.role,E=a.onKeyDown,J=a.onFocus,U=a.onBlur,ve=a.onClick,he=a.onDragEnter,be=a.onDragOver,se=a.onDragLeave,xe=a.onDrop,we=fe(a,mt);return y(y(Pe({onKeyDown:ye(_(E,Ue)),onFocus:ye(_(J,Be)),onBlur:ye(_(U,We)),onClick:K(_(ve,He)),onDragEnter:ie(_(he,Le)),onDragOver:ie(_(be,$e)),onDragLeave:ie(_(se,Ke)),onDrop:ie(_(xe,oe)),role:typeof j=="string"&&j!==""?j:"presentation"},h,D),!n&&!G?{tabIndex:0}:{}),we)}},[D,Ue,Be,We,He,Le,$e,Ke,oe,G,ee,n]),Er=m.useCallback(function(a){a.stopPropagation()},[]),Fr=m.useMemo(function(){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=a.refKey,h=f===void 0?"ref":f,j=a.onChange,E=a.onClick,J=fe(a,yt),U=Pe({accept:V,multiple:u,type:"file",style:{display:"none"},onChange:K(_(j,oe)),onClick:K(_(E,Er)),tabIndex:-1},h,F);return y(y({},U),J)}},[F,t,u,oe,n]);return y(y({},me),{},{isFocused:Dr&&!n,getRootProps:Ar,getInputProps:Fr,rootRef:D,inputRef:F,open:K($)})}function Et(e,r){switch(r.type){case"focus":return y(y({},e),{},{isFocused:!0});case"blur":return y(y({},e),{},{isFocused:!1});case"openDialog":return y(y({},Ce),{},{isFileDialogActive:!0});case"closeDialog":return y(y({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return y(y({},e),{},{isDragActive:r.isDragActive,isDragAccept:r.isDragAccept,isDragReject:r.isDragReject});case"setFiles":return y(y({},e),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections});case"reset":return y({},Ce);default:return e}}function ar(){}function xr({thumbnail:e,files:r,onRemove:t,sx:n}){return p.jsx(Ir,{initial:!1,children:r==null?void 0:r.map(i=>{const{key:o,name:s="",size:u=0}=cr(i),g=typeof i=="string";return e?p.jsxs(B,{component:Ne.div,...Ge().inUp,alignItems:"center",display:"inline-flex",justifyContent:"center",sx:{m:.5,width:80,height:80,borderRadius:1.25,overflow:"hidden",position:"relative",border:l=>`solid 1px ${x(l.palette.grey[500],.16)}`,...n},children:[p.jsx(qe,{tooltip:!0,imageView:!0,file:i,sx:{position:"absolute"},imgSx:{position:"absolute"}}),t&&p.jsx(Ee,{size:"small",onClick:()=>t(i),sx:{p:.5,top:4,right:4,position:"absolute",color:"common.white",bgcolor:l=>x(l.palette.grey[900],.48),"&:hover":{bgcolor:l=>x(l.palette.grey[900],.72)}},children:p.jsx(W,{icon:"mingcute:close-line",width:14})})]},o):p.jsxs(B,{component:Ne.div,...Ge().inUp,spacing:2,direction:"row",alignItems:"center",sx:{my:1,py:1,px:1.5,borderRadius:1,border:l=>`solid 1px ${x(l.palette.grey[500],.16)}`,...n},children:[p.jsx(qe,{file:i}),p.jsx(Pr,{primary:g?i:s,secondary:g?"":sr(u),secondaryTypographyProps:{component:"span",typography:"caption"}}),t&&p.jsx(Ee,{size:"small",onClick:()=>t(i),children:p.jsx(W,{icon:"mingcute:close-line",width:16})})]},o)})})}xr.propTypes={files:c.array,onRemove:c.func,sx:c.object,thumbnail:c.bool};function Ie({fileRejections:e}){return e.length?p.jsx(Cr,{variant:"outlined",sx:{py:1,px:2,mt:3,textAlign:"left",borderStyle:"dashed",borderColor:"error.main",bgcolor:r=>x(r.palette.error.main,.08)},children:e.map(({file:r,errors:t})=>{const{path:n,size:i}=cr(r);return p.jsxs(P,{sx:{my:1},children:[p.jsxs(le,{variant:"subtitle2",noWrap:!0,children:[n," - ",i?sr(i):""]}),t.map(o=>p.jsxs(P,{component:"span",sx:{typography:"caption"},children:["- ",o.message]},o.code))]},n)})}):null}Ie.propTypes={fileRejections:c.array};function wr({imgUrl:e=""}){return p.jsx(P,{sx:{p:1,top:0,left:0,width:1,height:1,position:"absolute"},children:p.jsx(lr,{alt:"file preview",src:e,sx:{width:1,height:1,borderRadius:1}})})}wr.propTypes={imgUrl:c.string};function Ft({disabled:e,multiple:r=!1,error:t,helperText:n,file:i,onDelete:o,files:s,thumbnail:u,onUpload:g,onRemove:l,onRemoveAll:d,sx:v,...O}){const{getRootProps:C,getInputProps:S,isDragActive:I,isDragReject:R,fileRejections:w}=de({multiple:r,disabled:e,...O}),M=!!i&&!r,Y=!!s&&r&&!!s.length,Z=R||!!t,G=p.jsxs(B,{spacing:3,alignItems:"center",justifyContent:"center",flexWrap:"wrap",children:[p.jsx(Sr,{sx:{width:1,maxWidth:200}}),p.jsxs(B,{spacing:1,sx:{textAlign:"center"},children:[p.jsx(le,{variant:"h6",children:"Drop or Select file"}),p.jsxs(le,{variant:"body2",sx:{color:"text.secondary"},children:["Drop files here or click",p.jsx(P,{component:"span",sx:{mx:.5,color:"primary.main",textDecoration:"underline"},children:"browse"}),"thorough your machine"]})]})]}),ee=p.jsx(wr,{imgUrl:typeof i=="string"?i:i==null?void 0:i.preview}),T=M&&o&&p.jsx(Ee,{size:"small",onClick:o,sx:{top:16,right:16,zIndex:9,position:"absolute",color:b=>x(b.palette.common.white,.8),bgcolor:b=>x(b.palette.grey[900],.72),"&:hover":{bgcolor:b=>x(b.palette.grey[900],.48)}},children:p.jsx(W,{icon:"mingcute:close-line",width:18})}),q=Y&&p.jsxs(p.Fragment,{children:[p.jsx(P,{sx:{my:3},children:p.jsx(xr,{files:s,thumbnail:u,onRemove:l})}),p.jsxs(B,{direction:"row",justifyContent:"flex-end",spacing:1.5,children:[d&&p.jsx(Ye,{color:"inherit",variant:"outlined",size:"small",onClick:d,children:"Remove All"}),g&&p.jsx(Ye,{size:"small",variant:"contained",onClick:g,startIcon:p.jsx(W,{icon:"eva:cloud-upload-fill"}),children:"Upload"})]})]});return p.jsxs(P,{sx:{width:1,position:"relative",...v},children:[p.jsxs(P,{...C(),sx:{p:5,outline:"none",borderRadius:1,cursor:"pointer",overflow:"hidden",position:"relative",bgcolor:b=>x(b.palette.grey[500],.08),border:b=>`1px dashed ${x(b.palette.grey[500],.2)}`,transition:b=>b.transitions.create(["opacity","padding"]),"&:hover":{opacity:.72},...I&&{opacity:.72},...e&&{opacity:.48,pointerEvents:"none"},...Z&&{color:"error.main",borderColor:"error.main",bgcolor:b=>x(b.palette.error.main,.08)},...M&&{padding:"24% 0"}},children:[p.jsx("input",{...S()}),M?ee:G]}),T,n&&n,p.jsx(Ie,{fileRejections:w}),q]})}Ft.propTypes={disabled:c.object,error:c.bool,file:c.oneOfType([c.string,c.object]),files:c.array,helperText:c.object,multiple:c.bool,onDelete:c.func,onRemove:c.func,onRemoveAll:c.func,onUpload:c.func,sx:c.object,thumbnail:c.bool};function Ot({placeholder:e,error:r,disabled:t,sx:n,...i}){const{getRootProps:o,getInputProps:s,isDragActive:u,isDragReject:g}=de({disabled:t,...i}),l=g||r;return p.jsxs(P,{...o(),sx:{m:.5,width:64,height:64,flexShrink:0,display:"flex",borderRadius:1,cursor:"pointer",alignItems:"center",color:"text.disabled",justifyContent:"center",bgcolor:d=>x(d.palette.grey[500],.08),border:d=>`dashed 1px ${x(d.palette.grey[500],.16)}`,...u&&{opacity:.72},...t&&{opacity:.48,pointerEvents:"none"},...l&&{color:"error.main",borderColor:"error.main",bgcolor:d=>x(d.palette.error.main,.08)},"&:hover":{opacity:.72},...n},children:[p.jsx("input",{...s()}),e||p.jsx(W,{icon:"eva:cloud-upload-fill",width:28})]})}Ot.propTypes={disabled:c.object,error:c.bool,placeholder:c.object,sx:c.object};function _t({error:e,file:r,disabled:t,helperText:n,sx:i,...o}){const{getRootProps:s,getInputProps:u,isDragActive:g,isDragReject:l,fileRejections:d}=de({multiple:!1,disabled:t,accept:{"image/*":[]},...o}),v=!!r,O=l||!!e,C=typeof r=="string"?r:r==null?void 0:r.preview,S=v&&p.jsx(lr,{alt:"avatar",src:C,sx:{width:1,height:1,borderRadius:"50%"}}),I=p.jsxs(B,{alignItems:"center",justifyContent:"center",spacing:1,className:"upload-placeholder",sx:{top:0,left:0,width:1,height:1,zIndex:9,borderRadius:"50%",position:"absolute",color:"text.disabled",bgcolor:w=>x(w.palette.grey[500],.08),transition:w=>w.transitions.create(["opacity"],{duration:w.transitions.duration.shorter}),"&:hover":{opacity:.72},...O&&{color:"error.main",bgcolor:w=>x(w.palette.error.main,.08)},...v&&{zIndex:9,opacity:0,color:"common.white",bgcolor:w=>x(w.palette.grey[900],.64)}},children:[p.jsx(W,{icon:"solar:camera-add-bold",width:32}),p.jsx(le,{variant:"caption",children:r?"Update photo":"Upload photo"})]}),R=p.jsxs(P,{sx:{width:1,height:1,overflow:"hidden",borderRadius:"50%",position:"relative"},children:[S,I]});return p.jsxs(p.Fragment,{children:[p.jsxs(P,{...s(),sx:{p:1,m:"auto",width:144,height:144,cursor:"pointer",overflow:"hidden",borderRadius:"50%",border:w=>`1px dashed ${x(w.palette.grey[500],.2)}`,...g&&{opacity:.72},...t&&{opacity:.48,pointerEvents:"none"},...O&&{borderColor:"error.main"},...v&&{...O&&{bgcolor:w=>x(w.palette.error.main,.08)},"&:hover .upload-placeholder":{opacity:1}},...i},children:[p.jsx("input",{...u()}),R]}),n&&n,p.jsx(Ie,{fileRejections:d})]})}_t.propTypes={disabled:c.object,error:c.bool,file:c.oneOfType([c.string,c.object]),helperText:c.object,sx:c.object};export{xr as M,_t as U,kt as _,Ft as a,Ot as b};
