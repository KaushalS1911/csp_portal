import{af as b,j as at,y as Ce}from"./index-cs8KH1Gj.js";var _e=e=>e.type==="checkbox",ne=e=>e instanceof Date,I=e=>e==null;const yt=e=>typeof e=="object";var L=e=>!I(e)&&!Array.isArray(e)&&yt(e)&&!ne(e),_t=e=>L(e)&&e.target?_e(e.target)?e.target.checked:e.target.value:e,Mt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,gt=(e,i)=>e.has(Mt(i)),Bt=e=>{const i=e.constructor&&e.constructor.prototype;return L(i)&&i.hasOwnProperty("isPrototypeOf")},Ke=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function P(e){let i;const t=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Ke&&(e instanceof Blob||e instanceof FileList))&&(t||L(e)))if(i=t?[]:{},!t&&!Bt(e))i=e;else for(const r in e)e.hasOwnProperty(r)&&(i[r]=P(e[r]));else return e;return i}var le=e=>Array.isArray(e)?e.filter(Boolean):[],E=e=>e===void 0,f=(e,i,t)=>{if(!i||!L(e))return t;const r=le(i.split(/[,[\].]+?/)).reduce((u,l)=>I(u)?u:u[l],e);return E(r)||r===e?E(e[i])?t:e[i]:r},Q=e=>typeof e=="boolean";const me={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},K={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Z={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ht=b.createContext(null),xe=()=>b.useContext(ht),Pt=e=>{const{children:i,...t}=e;return b.createElement(ht.Provider,{value:t},i)};var vt=(e,i,t,r=!0)=>{const u={defaultValues:i._defaultValues};for(const l in e)Object.defineProperty(u,l,{get:()=>{const c=l;return i._proxyFormState[c]!==K.all&&(i._proxyFormState[c]=!r||K.all),t&&(t[c]=!0),e[c]}});return u},q=e=>L(e)&&!Object.keys(e).length,mt=(e,i,t,r)=>{t(e);const{name:u,...l}=e;return q(l)||Object.keys(l).length>=Object.keys(i).length||Object.keys(l).find(c=>i[c]===(!r||K.all))},W=e=>Array.isArray(e)?e:[e],At=(e,i,t)=>!e||!i||e===i||W(e).some(r=>r&&(t?r===i:r.startsWith(i)||i.startsWith(r)));function pe(e){const i=b.useRef(e);i.current=e,b.useEffect(()=>{const t=!e.disabled&&i.current.subject&&i.current.subject.subscribe({next:i.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function It(e){const i=xe(),{control:t=i.control,disabled:r,name:u,exact:l}=e||{},[c,A]=b.useState(t._formState),g=b.useRef(!0),C=b.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),w=b.useRef(u);return w.current=u,pe({disabled:r,next:p=>g.current&&At(w.current,p.name,l)&&mt(p,C.current,t._updateFormState)&&A({...t._formState,...p}),subject:t._subjects.state}),b.useEffect(()=>(g.current=!0,C.current.isValid&&t._updateValid(!0),()=>{g.current=!1}),[t]),vt(c,t,C.current,!1)}var X=e=>typeof e=="string",bt=(e,i,t,r,u)=>X(e)?(r&&i.watch.add(e),f(t,e,u)):Array.isArray(e)?e.map(l=>(r&&i.watch.add(l),f(t,l))):(r&&(i.watchAll=!0),t);function Nt(e){const i=xe(),{control:t=i.control,name:r,defaultValue:u,disabled:l,exact:c}=e||{},A=b.useRef(r);A.current=r,pe({disabled:l,subject:t._subjects.values,next:w=>{At(A.current,w.name,c)&&C(P(bt(A.current,t._names,w.values||t._formValues,!1,u)))}});const[g,C]=b.useState(t._getWatch(r,u));return b.useEffect(()=>t._removeUnmounted()),g}var Ge=e=>/^\w*$/.test(e),Vt=e=>le(e.replace(/["|']|\]/g,"").split(/\.|\[/));function D(e,i,t){let r=-1;const u=Ge(i)?[i]:Vt(i),l=u.length,c=l-1;for(;++r<l;){const A=u[r];let g=t;if(r!==c){const C=e[A];g=L(C)||Array.isArray(C)?C:isNaN(+u[r+1])?{}:[]}e[A]=g,e=e[A]}return e}function jt(e){const i=xe(),{name:t,disabled:r,control:u=i.control,shouldUnregister:l}=e,c=gt(u._names.array,t),A=Nt({control:u,name:t,defaultValue:f(u._formValues,t,f(u._defaultValues,t,e.defaultValue)),exact:!0}),g=It({control:u,name:t}),C=b.useRef(u.register(t,{...e.rules,value:A}));return C.current=u.register(t,e.rules),b.useEffect(()=>{const w=u._options.shouldUnregister||l,p=(h,$)=>{const M=f(u._fields,h);M&&(M._f.mount=$)};if(p(t,!0),w){const h=P(f(u._options.defaultValues,t));D(u._defaultValues,t,h),E(f(u._formValues,t))&&D(u._formValues,t,h)}return()=>{(c?w&&!u._state.action:w)?u.unregister(t):p(t,!1)}},[t,u,c,l]),b.useEffect(()=>{f(u._fields,t)&&u._updateDisabledField({disabled:r,fields:u._fields,name:t,value:f(u._fields,t)._f.value})},[r,t,u]),{field:{name:t,value:A,...Q(r)||Q(g.disabled)?{disabled:g.disabled||r}:{},onChange:b.useCallback(w=>C.current.onChange({target:{value:_t(w),name:t},type:me.CHANGE}),[t]),onBlur:b.useCallback(()=>C.current.onBlur({target:{value:f(u._formValues,t),name:t},type:me.BLUR}),[t,u]),ref:w=>{const p=f(u._fields,t);p&&w&&(p._f.ref={focus:()=>w.focus(),select:()=>w.select(),setCustomValidity:h=>w.setCustomValidity(h),reportValidity:()=>w.reportValidity()})}},formState:g,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!f(g.errors,t)},isDirty:{enumerable:!0,get:()=>!!f(g.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!f(g.touchedFields,t)},error:{enumerable:!0,get:()=>f(g.errors,t)}})}}const ir=e=>e.render(jt(e));var qt=(e,i,t,r,u)=>i?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[r]:u||!0}}:{},ee=()=>{const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const t=(Math.random()*16+e)%16|0;return(i=="x"?t:t&3|8).toString(16)})},Oe=(e,i,t={})=>t.shouldFocus||E(t.shouldFocus)?t.focusName||`${e}.${E(t.focusIndex)?i:t.focusIndex}.`:"",We=e=>({isOnSubmit:!e||e===K.onSubmit,isOnBlur:e===K.onBlur,isOnChange:e===K.onChange,isOnAll:e===K.all,isOnTouch:e===K.onTouched}),$e=(e,i,t)=>!t&&(i.watchAll||i.watch.has(e)||[...i.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const ye=(e,i,t,r)=>{for(const u of t||Object.keys(e)){const l=f(e,u);if(l){const{_f:c,...A}=l;if(c){if(c.refs&&c.refs[0]&&i(c.refs[0],u)&&!r)break;if(c.ref&&i(c.ref,c.name)&&!r)break}else L(A)&&ye(A,i)}}};var Ft=(e,i,t)=>{const r=le(f(e,t));return D(r,"root",i[t]),D(e,t,r),e},ze=e=>e.type==="file",te=e=>typeof e=="function",Ae=e=>{if(!Ke)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},ve=e=>X(e),Je=e=>e.type==="radio",be=e=>e instanceof RegExp;const nt={value:!1,isValid:!1},lt={value:!0,isValid:!0};var xt=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!E(e[0].attributes.value)?E(e[0].value)||e[0].value===""?lt:{value:e[0].value,isValid:!0}:lt:nt}return nt};const ot={isValid:!1,value:null};var pt=e=>Array.isArray(e)?e.reduce((i,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:i,ot):ot;function ct(e,i,t="validate"){if(ve(e)||Array.isArray(e)&&e.every(ve)||Q(e)&&!e)return{type:t,message:ve(e)?e:"",ref:i}}var ae=e=>L(e)&&!be(e)?e:{value:e,message:""},He=async(e,i,t,r,u)=>{const{ref:l,refs:c,required:A,maxLength:g,minLength:C,min:w,max:p,pattern:h,validate:$,name:M,valueAsNumber:oe,mount:ie,disabled:ce}=e._f,V=f(i,M);if(!ie||ce)return{};const j=c?c[0]:l,G=S=>{r&&j.reportValidity&&(j.setCustomValidity(Q(S)?"":S||""),j.reportValidity())},y={},v=Je(l),F=_e(l),R=v||F,B=(oe||ze(l))&&E(l.value)&&E(V)||Ae(l)&&l.value===""||V===""||Array.isArray(V)&&!V.length,z=qt.bind(null,M,t,y),Y=(S,x,O,N=Z.maxLength,H=Z.minLength)=>{const J=S?x:O;y[M]={type:S?N:H,message:J,ref:l,...z(S?N:H,J)}};if(u?!Array.isArray(V)||!V.length:A&&(!R&&(B||I(V))||Q(V)&&!V||F&&!xt(c).isValid||v&&!pt(c).isValid)){const{value:S,message:x}=ve(A)?{value:!!A,message:A}:ae(A);if(S&&(y[M]={type:Z.required,message:x,ref:j,...z(Z.required,x)},!t))return G(x),y}if(!B&&(!I(w)||!I(p))){let S,x;const O=ae(p),N=ae(w);if(!I(V)&&!isNaN(V)){const H=l.valueAsNumber||V&&+V;I(O.value)||(S=H>O.value),I(N.value)||(x=H<N.value)}else{const H=l.valueAsDate||new Date(V),J=ge=>new Date(new Date().toDateString()+" "+ge),re=l.type=="time",fe=l.type=="week";X(O.value)&&V&&(S=re?J(V)>J(O.value):fe?V>O.value:H>new Date(O.value)),X(N.value)&&V&&(x=re?J(V)<J(N.value):fe?V<N.value:H<new Date(N.value))}if((S||x)&&(Y(!!S,O.message,N.message,Z.max,Z.min),!t))return G(y[M].message),y}if((g||C)&&!B&&(X(V)||u&&Array.isArray(V))){const S=ae(g),x=ae(C),O=!I(S.value)&&V.length>+S.value,N=!I(x.value)&&V.length<+x.value;if((O||N)&&(Y(O,S.message,x.message),!t))return G(y[M].message),y}if(h&&!B&&X(V)){const{value:S,message:x}=ae(h);if(be(S)&&!V.match(S)&&(y[M]={type:Z.pattern,message:x,ref:l,...z(Z.pattern,x)},!t))return G(x),y}if($){if(te($)){const S=await $(V,i),x=ct(S,j);if(x&&(y[M]={...x,...z(Z.validate,x.message)},!t))return G(x.message),y}else if(L($)){let S={};for(const x in $){if(!q(S)&&!t)break;const O=ct(await $[x](V,i),j,x);O&&(S={...O,...z(x,O.message)},G(O.message),t&&(y[M]=S))}if(!q(S)&&(y[M]={ref:j,...S},!t))return y}}return G(!0),y};function Re(e,i){return[...e,...W(i)]}var Te=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Le(e,i,t){return[...e.slice(0,i),...W(t),...e.slice(i)]}var Ue=(e,i,t)=>Array.isArray(e)?(E(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(i,1)[0]),e):[];function Me(e,i){return[...W(i),...W(e)]}function Wt(e,i){let t=0;const r=[...e];for(const u of i)r.splice(u-t,1),t++;return le(r).length?r:[]}var Be=(e,i)=>E(i)?[]:Wt(e,W(i).sort((t,r)=>t-r)),Pe=(e,i,t)=>{e[i]=[e[t],e[t]=e[i]][0]};function $t(e,i){const t=i.slice(0,-1).length;let r=0;for(;r<t;)e=E(e)?r++:e[i[r++]];return e}function Ht(e){for(const i in e)if(e.hasOwnProperty(i)&&!E(e[i]))return!1;return!0}function U(e,i){const t=Array.isArray(i)?i:Ge(i)?[i]:Vt(i),r=t.length===1?e:$t(e,t),u=t.length-1,l=t[u];return r&&delete r[l],u!==0&&(L(r)&&q(r)||Array.isArray(r)&&Ht(r))&&U(e,t.slice(0,-1)),e}var ft=(e,i,t)=>(e[i]=t,e);function ur(e){const i=xe(),{control:t=i.control,name:r,keyName:u="id",shouldUnregister:l}=e,[c,A]=b.useState(t._getFieldArray(r)),g=b.useRef(t._getFieldArray(r).map(ee)),C=b.useRef(c),w=b.useRef(r),p=b.useRef(!1);w.current=r,C.current=c,t._names.array.add(r),e.rules&&t.register(r,e.rules),pe({next:({values:y,name:v})=>{if(v===w.current||!v){const F=f(y,w.current);Array.isArray(F)&&(A(F),g.current=F.map(ee))}},subject:t._subjects.array});const h=b.useCallback(y=>{p.current=!0,t._updateFieldArray(r,y)},[t,r]),$=(y,v)=>{const F=W(P(y)),R=Re(t._getFieldArray(r),F);t._names.focus=Oe(r,R.length-1,v),g.current=Re(g.current,F.map(ee)),h(R),A(R),t._updateFieldArray(r,R,Re,{argA:Te(y)})},M=(y,v)=>{const F=W(P(y)),R=Me(t._getFieldArray(r),F);t._names.focus=Oe(r,0,v),g.current=Me(g.current,F.map(ee)),h(R),A(R),t._updateFieldArray(r,R,Me,{argA:Te(y)})},oe=y=>{const v=Be(t._getFieldArray(r),y);g.current=Be(g.current,y),h(v),A(v),t._updateFieldArray(r,v,Be,{argA:y})},ie=(y,v,F)=>{const R=W(P(v)),B=Le(t._getFieldArray(r),y,R);t._names.focus=Oe(r,y,F),g.current=Le(g.current,y,R.map(ee)),h(B),A(B),t._updateFieldArray(r,B,Le,{argA:y,argB:Te(v)})},ce=(y,v)=>{const F=t._getFieldArray(r);Pe(F,y,v),Pe(g.current,y,v),h(F),A(F),t._updateFieldArray(r,F,Pe,{argA:y,argB:v},!1)},V=(y,v)=>{const F=t._getFieldArray(r);Ue(F,y,v),Ue(g.current,y,v),h(F),A(F),t._updateFieldArray(r,F,Ue,{argA:y,argB:v},!1)},j=(y,v)=>{const F=P(v),R=ft(t._getFieldArray(r),y,F);g.current=[...R].map((B,z)=>!B||z===y?ee():g.current[z]),h(R),A([...R]),t._updateFieldArray(r,R,ft,{argA:y,argB:F},!0,!1)},G=y=>{const v=W(P(y));g.current=v.map(ee),h([...v]),A([...v]),t._updateFieldArray(r,[...v],F=>F,{},!0,!1)};return b.useEffect(()=>{if(t._state.action=!1,$e(r,t._names)&&t._subjects.state.next({...t._formState}),p.current&&(!We(t._options.mode).isOnSubmit||t._formState.isSubmitted))if(t._options.resolver)t._executeSchema([r]).then(y=>{const v=f(y.errors,r),F=f(t._formState.errors,r);(F?!v&&F.type||v&&(F.type!==v.type||F.message!==v.message):v&&v.type)&&(v?D(t._formState.errors,r,v):U(t._formState.errors,r),t._subjects.state.next({errors:t._formState.errors}))});else{const y=f(t._fields,r);y&&y._f&&He(y,t._formValues,t._options.criteriaMode===K.all,t._options.shouldUseNativeValidation,!0).then(v=>!q(v)&&t._subjects.state.next({errors:Ft(t._formState.errors,v,r)}))}t._subjects.values.next({name:r,values:{...t._formValues}}),t._names.focus&&ye(t._fields,(y,v)=>{if(t._names.focus&&v.startsWith(t._names.focus)&&y.focus)return y.focus(),1}),t._names.focus="",t._updateValid(),p.current=!1},[c,r,t]),b.useEffect(()=>(!f(t._formValues,r)&&t._updateFieldArray(r),()=>{(t._options.shouldUnregister||l)&&t.unregister(r)}),[r,t,u,l]),{swap:b.useCallback(ce,[h,r,t]),move:b.useCallback(V,[h,r,t]),prepend:b.useCallback(M,[h,r,t]),append:b.useCallback($,[h,r,t]),remove:b.useCallback(oe,[h,r,t]),insert:b.useCallback(ie,[h,r,t]),update:b.useCallback(j,[h,r,t]),replace:b.useCallback(G,[h,r,t]),fields:b.useMemo(()=>c.map((y,v)=>({...y,[u]:g.current[v]||ee()})),[c,u])}}function Ie(){let e=[];return{get observers(){return e},next:u=>{for(const l of e)l.next&&l.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(l=>l!==u)}}),unsubscribe:()=>{e=[]}}}var Ve=e=>I(e)||!yt(e);function se(e,i){if(Ve(e)||Ve(i))return e===i;if(ne(e)&&ne(i))return e.getTime()===i.getTime();const t=Object.keys(e),r=Object.keys(i);if(t.length!==r.length)return!1;for(const u of t){const l=e[u];if(!r.includes(u))return!1;if(u!=="ref"){const c=i[u];if(ne(l)&&ne(c)||L(l)&&L(c)||Array.isArray(l)&&Array.isArray(c)?!se(l,c):l!==c)return!1}}return!0}var St=e=>e.type==="select-multiple",Kt=e=>Je(e)||_e(e),Ne=e=>Ae(e)&&e.isConnected,wt=e=>{for(const i in e)if(te(e[i]))return!0;return!1};function Fe(e,i={}){const t=Array.isArray(e);if(L(e)||t)for(const r in e)Array.isArray(e[r])||L(e[r])&&!wt(e[r])?(i[r]=Array.isArray(e[r])?[]:{},Fe(e[r],i[r])):I(e[r])||(i[r]=!0);return i}function Dt(e,i,t){const r=Array.isArray(e);if(L(e)||r)for(const u in e)Array.isArray(e[u])||L(e[u])&&!wt(e[u])?E(i)||Ve(t[u])?t[u]=Array.isArray(e[u])?Fe(e[u],[]):{...Fe(e[u])}:Dt(e[u],I(i)?{}:i[u],t[u]):t[u]=!se(e[u],i[u]);return t}var je=(e,i)=>Dt(e,i,Fe(i)),kt=(e,{valueAsNumber:i,valueAsDate:t,setValueAs:r})=>E(e)?e:i?e===""?NaN:e&&+e:t&&X(e)?new Date(e):r?r(e):e;function qe(e){const i=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):i.disabled))return ze(i)?i.files:Je(i)?pt(e.refs).value:St(i)?[...i.selectedOptions].map(({value:t})=>t):_e(i)?xt(e.refs).value:kt(E(i.value)?e.ref.value:i.value,e)}var Gt=(e,i,t,r)=>{const u={};for(const l of e){const c=f(i,l);c&&D(u,l,c._f)}return{criteriaMode:t,names:[...e],fields:u,shouldUseNativeValidation:r}},de=e=>E(e)?e:be(e)?e.source:L(e)?be(e.value)?e.value.source:e.value:e,zt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function dt(e,i,t){const r=f(e,t);if(r||Ge(t))return{error:r,name:t};const u=t.split(".");for(;u.length;){const l=u.join("."),c=f(i,l),A=f(e,l);if(c&&!Array.isArray(c)&&t!==l)return{name:t};if(A&&A.type)return{name:l,error:A};u.pop()}return{name:t}}var Jt=(e,i,t,r,u)=>u.isOnAll?!1:!t&&u.isOnTouch?!(i||e):(t?r.isOnBlur:u.isOnBlur)?!e:(t?r.isOnChange:u.isOnChange)?e:!0,Qt=(e,i)=>!le(f(e,i)).length&&U(e,i);const Xt={mode:K.onSubmit,reValidateMode:K.onChange,shouldFocusError:!0};function Yt(e={},i){let t={...Xt,...e},r={submitCount:0,isDirty:!1,isLoading:te(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{},disabled:!1},u={},l=L(t.defaultValues)||L(t.values)?P(t.defaultValues||t.values)||{}:{},c=t.shouldUnregister?{}:P(l),A={action:!1,mount:!1,watch:!1},g={mount:new Set,unMount:new Set,array:new Set,watch:new Set},C,w=0;const p={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:Ie(),array:Ie(),state:Ie()},$=e.resetOptions&&e.resetOptions.keepDirtyValues,M=We(t.mode),oe=We(t.reValidateMode),ie=t.criteriaMode===K.all,ce=s=>a=>{clearTimeout(w),w=setTimeout(s,a)},V=async s=>{if(p.isValid||s){const a=t.resolver?q((await B()).errors):await Y(u,!0);a!==r.isValid&&h.state.next({isValid:a})}},j=s=>p.isValidating&&h.state.next({isValidating:s}),G=(s,a=[],n,_,d=!0,o=!0)=>{if(_&&n){if(A.action=!0,o&&Array.isArray(f(u,s))){const m=n(f(u,s),_.argA,_.argB);d&&D(u,s,m)}if(o&&Array.isArray(f(r.errors,s))){const m=n(f(r.errors,s),_.argA,_.argB);d&&D(r.errors,s,m),Qt(r.errors,s)}if(p.touchedFields&&o&&Array.isArray(f(r.touchedFields,s))){const m=n(f(r.touchedFields,s),_.argA,_.argB);d&&D(r.touchedFields,s,m)}p.dirtyFields&&(r.dirtyFields=je(l,c)),h.state.next({name:s,isDirty:x(s,a),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else D(c,s,a)},y=(s,a)=>{D(r.errors,s,a),h.state.next({errors:r.errors})},v=(s,a,n,_)=>{const d=f(u,s);if(d){const o=f(c,s,E(n)?f(l,s):n);E(o)||_&&_.defaultChecked||a?D(c,s,a?o:qe(d._f)):H(s,o),A.mount&&V()}},F=(s,a,n,_,d)=>{let o=!1,m=!1;const k={name:s};if(!n||_){p.isDirty&&(m=r.isDirty,r.isDirty=k.isDirty=x(),o=m!==k.isDirty);const T=se(f(l,s),a);m=f(r.dirtyFields,s),T?U(r.dirtyFields,s):D(r.dirtyFields,s,!0),k.dirtyFields=r.dirtyFields,o=o||p.dirtyFields&&m!==!T}if(n){const T=f(r.touchedFields,s);T||(D(r.touchedFields,s,n),k.touchedFields=r.touchedFields,o=o||p.touchedFields&&T!==n)}return o&&d&&h.state.next(k),o?k:{}},R=(s,a,n,_)=>{const d=f(r.errors,s),o=p.isValid&&Q(a)&&r.isValid!==a;if(e.delayError&&n?(C=ce(()=>y(s,n)),C(e.delayError)):(clearTimeout(w),C=null,n?D(r.errors,s,n):U(r.errors,s)),(n?!se(d,n):d)||!q(_)||o){const m={..._,...o&&Q(a)?{isValid:a}:{},errors:r.errors,name:s};r={...r,...m},h.state.next(m)}j(!1)},B=async s=>t.resolver(c,t.context,Gt(s||g.mount,u,t.criteriaMode,t.shouldUseNativeValidation)),z=async s=>{const{errors:a}=await B(s);if(s)for(const n of s){const _=f(a,n);_?D(r.errors,n,_):U(r.errors,n)}else r.errors=a;return a},Y=async(s,a,n={valid:!0})=>{for(const _ in s){const d=s[_];if(d){const{_f:o,...m}=d;if(o){const k=g.array.has(o.name),T=await He(d,c,ie,t.shouldUseNativeValidation&&!a,k);if(T[o.name]&&(n.valid=!1,a))break;!a&&(f(T,o.name)?k?Ft(r.errors,T,o.name):D(r.errors,o.name,T[o.name]):U(r.errors,o.name))}m&&await Y(m,a,n)}}return n.valid},S=()=>{for(const s of g.unMount){const a=f(u,s);a&&(a._f.refs?a._f.refs.every(n=>!Ne(n)):!Ne(a._f.ref))&&we(s)}g.unMount=new Set},x=(s,a)=>(s&&a&&D(c,s,a),!se(Qe(),l)),O=(s,a,n)=>bt(s,g,{...A.mount?c:E(a)?l:X(s)?{[s]:a}:a},n,a),N=s=>le(f(A.mount?c:l,s,e.shouldUnregister?f(l,s,[]):[])),H=(s,a,n={})=>{const _=f(u,s);let d=a;if(_){const o=_._f;o&&(!o.disabled&&D(c,s,kt(a,o)),d=Ae(o.ref)&&I(a)?"":a,St(o.ref)?[...o.ref.options].forEach(m=>m.selected=d.includes(m.value)):o.refs?_e(o.ref)?o.refs.length>1?o.refs.forEach(m=>(!m.defaultChecked||!m.disabled)&&(m.checked=Array.isArray(d)?!!d.find(k=>k===m.value):d===m.value)):o.refs[0]&&(o.refs[0].checked=!!d):o.refs.forEach(m=>m.checked=m.value===d):ze(o.ref)?o.ref.value="":(o.ref.value=d,o.ref.type||h.values.next({name:s,values:{...c}})))}(n.shouldDirty||n.shouldTouch)&&F(s,d,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&Se(s)},J=(s,a,n)=>{for(const _ in a){const d=a[_],o=`${s}.${_}`,m=f(u,o);(g.array.has(s)||!Ve(d)||m&&!m._f)&&!ne(d)?J(o,d,n):H(o,d,n)}},re=(s,a,n={})=>{const _=f(u,s),d=g.array.has(s),o=P(a);D(c,s,o),d?(h.array.next({name:s,values:{...c}}),(p.isDirty||p.dirtyFields)&&n.shouldDirty&&h.state.next({name:s,dirtyFields:je(l,c),isDirty:x(s,o)})):_&&!_._f&&!I(o)?J(s,o,n):H(s,o,n),$e(s,g)&&h.state.next({...r}),h.values.next({name:s,values:{...c}}),!A.mount&&i()},fe=async s=>{const a=s.target;let n=a.name,_=!0;const d=f(u,n),o=()=>a.type?qe(d._f):_t(s),m=k=>{_=Number.isNaN(k)||k===f(c,n,k)};if(d){let k,T;const he=o(),ue=s.type===me.BLUR||s.type===me.FOCUS_OUT,Tt=!zt(d._f)&&!t.resolver&&!f(r.errors,n)&&!d._f.deps||Jt(ue,f(r.touchedFields,n),r.isSubmitted,oe,M),ke=$e(n,g,ue);D(c,n,he),ue?(d._f.onBlur&&d._f.onBlur(s),C&&C(0)):d._f.onChange&&d._f.onChange(s);const Ee=F(n,he,ue,!1),Lt=!q(Ee)||ke;if(!ue&&h.values.next({name:n,type:s.type,values:{...c}}),Tt)return p.isValid&&V(),Lt&&h.state.next({name:n,...ke?{}:Ee});if(!ue&&ke&&h.state.next({...r}),j(!0),t.resolver){const{errors:it}=await B([n]);if(m(he),_){const Ut=dt(r.errors,u,n),ut=dt(it,u,Ut.name||n);k=ut.error,n=ut.name,T=q(it)}}else k=(await He(d,c,ie,t.shouldUseNativeValidation))[n],m(he),_&&(k?T=!1:p.isValid&&(T=await Y(u,!0)));_&&(d._f.deps&&Se(d._f.deps),R(n,T,k,Ee))}},ge=(s,a)=>{if(f(r.errors,a)&&s.focus)return s.focus(),1},Se=async(s,a={})=>{let n,_;const d=W(s);if(j(!0),t.resolver){const o=await z(E(s)?s:d);n=q(o),_=s?!d.some(m=>f(o,m)):n}else s?(_=(await Promise.all(d.map(async o=>{const m=f(u,o);return await Y(m&&m._f?{[o]:m}:m)}))).every(Boolean),!(!_&&!r.isValid)&&V()):_=n=await Y(u);return h.state.next({...!X(s)||p.isValid&&n!==r.isValid?{}:{name:s},...t.resolver||!s?{isValid:n}:{},errors:r.errors,isValidating:!1}),a.shouldFocus&&!_&&ye(u,ge,s?d:g.mount),_},Qe=s=>{const a={...l,...A.mount?c:{}};return E(s)?a:X(s)?f(a,s):s.map(n=>f(a,n))},Xe=(s,a)=>({invalid:!!f((a||r).errors,s),isDirty:!!f((a||r).dirtyFields,s),isTouched:!!f((a||r).touchedFields,s),error:f((a||r).errors,s)}),Et=s=>{s&&W(s).forEach(a=>U(r.errors,a)),h.state.next({errors:s?r.errors:{}})},Ye=(s,a,n)=>{const _=(f(u,s,{_f:{}})._f||{}).ref;D(r.errors,s,{...a,ref:_}),h.state.next({name:s,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&_&&_.focus&&_.focus()},Ct=(s,a)=>te(s)?h.values.subscribe({next:n=>s(O(void 0,a),n)}):O(s,a,!0),we=(s,a={})=>{for(const n of s?W(s):g.mount)g.mount.delete(n),g.array.delete(n),a.keepValue||(U(u,n),U(c,n)),!a.keepError&&U(r.errors,n),!a.keepDirty&&U(r.dirtyFields,n),!a.keepTouched&&U(r.touchedFields,n),!t.shouldUnregister&&!a.keepDefaultValue&&U(l,n);h.values.next({values:{...c}}),h.state.next({...r,...a.keepDirty?{isDirty:x()}:{}}),!a.keepIsValid&&V()},Ze=({disabled:s,name:a,field:n,fields:_,value:d})=>{if(Q(s)){const o=s?void 0:E(d)?qe(n?n._f:f(_,a)._f):d;D(c,a,o),F(a,o,!1,!1,!0)}},De=(s,a={})=>{let n=f(u,s);const _=Q(a.disabled);return D(u,s,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:s}},name:s,mount:!0,...a}}),g.mount.add(s),n?Ze({field:n,disabled:a.disabled,name:s}):v(s,!0,a.value),{..._?{disabled:a.disabled}:{},...t.progressive?{required:!!a.required,min:de(a.min),max:de(a.max),minLength:de(a.minLength),maxLength:de(a.maxLength),pattern:de(a.pattern)}:{},name:s,onChange:fe,onBlur:fe,ref:d=>{if(d){De(s,a),n=f(u,s);const o=E(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,m=Kt(o),k=n._f.refs||[];if(m?k.find(T=>T===o):o===n._f.ref)return;D(u,s,{_f:{...n._f,...m?{refs:[...k.filter(Ne),o,...Array.isArray(f(l,s))?[{}]:[]],ref:{type:o.type,name:s}}:{ref:o}}}),v(s,!1,void 0,o)}else n=f(u,s,{}),n._f&&(n._f.mount=!1),(t.shouldUnregister||a.shouldUnregister)&&!(gt(g.array,s)&&A.action)&&g.unMount.add(s)}}},et=()=>t.shouldFocusError&&ye(u,ge,g.mount),Ot=s=>{Q(s)&&(h.state.next({disabled:s}),ye(u,a=>{a.disabled=s},0,!1))},tt=(s,a)=>async n=>{n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let _=P(c);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:d,values:o}=await B();r.errors=d,_=o}else await Y(u);U(r.errors,"root"),q(r.errors)?(h.state.next({errors:{}}),await s(_,n)):(a&&await a({...r.errors},n),et(),setTimeout(et)),h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:q(r.errors),submitCount:r.submitCount+1,errors:r.errors})},Rt=(s,a={})=>{f(u,s)&&(E(a.defaultValue)?re(s,f(l,s)):(re(s,a.defaultValue),D(l,s,a.defaultValue)),a.keepTouched||U(r.touchedFields,s),a.keepDirty||(U(r.dirtyFields,s),r.isDirty=a.defaultValue?x(s,f(l,s)):x()),a.keepError||(U(r.errors,s),p.isValid&&V()),h.state.next({...r}))},rt=(s,a={})=>{const n=s?P(s):l,_=P(n),d=s&&!q(s)?_:l;if(a.keepDefaultValues||(l=n),!a.keepValues){if(a.keepDirtyValues||$)for(const o of g.mount)f(r.dirtyFields,o)?D(d,o,f(c,o)):re(o,f(d,o));else{if(Ke&&E(s))for(const o of g.mount){const m=f(u,o);if(m&&m._f){const k=Array.isArray(m._f.refs)?m._f.refs[0]:m._f.ref;if(Ae(k)){const T=k.closest("form");if(T){T.reset();break}}}}u={}}c=e.shouldUnregister?a.keepDefaultValues?P(l):{}:P(d),h.array.next({values:{...d}}),h.values.next({values:{...d}})}g={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!A.mount&&i(),A.mount=!p.isValid||!!a.keepIsValid,A.watch=!!e.shouldUnregister,h.state.next({submitCount:a.keepSubmitCount?r.submitCount:0,isDirty:a.keepDirty?r.isDirty:!!(a.keepDefaultValues&&!se(s,l)),isSubmitted:a.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:a.keepDirtyValues?r.dirtyFields:a.keepDefaultValues&&s?je(l,s):{},touchedFields:a.keepTouched?r.touchedFields:{},errors:a.keepErrors?r.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},st=(s,a)=>rt(te(s)?s(c):s,a);return{control:{register:De,unregister:we,getFieldState:Xe,handleSubmit:tt,setError:Ye,_executeSchema:B,_getWatch:O,_getDirty:x,_updateValid:V,_removeUnmounted:S,_updateFieldArray:G,_updateDisabledField:Ze,_getFieldArray:N,_reset:rt,_resetDefaultValues:()=>te(t.defaultValues)&&t.defaultValues().then(s=>{st(s,t.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:s=>{r={...r,...s}},_disableForm:Ot,_subjects:h,_proxyFormState:p,get _fields(){return u},get _formValues(){return c},get _state(){return A},set _state(s){A=s},get _defaultValues(){return l},get _names(){return g},set _names(s){g=s},get _formState(){return r},set _formState(s){r=s},get _options(){return t},set _options(s){t={...t,...s}}},trigger:Se,register:De,handleSubmit:tt,watch:Ct,setValue:re,getValues:Qe,reset:st,resetField:Rt,clearErrors:Et,unregister:we,setError:Ye,setFocus:(s,a={})=>{const n=f(u,s),_=n&&n._f;if(_){const d=_.refs?_.refs[0]:_.ref;d.focus&&(d.focus(),a.shouldSelect&&d.select())}},getFieldState:Xe}}function ar(e={}){const i=b.useRef(),t=b.useRef(),[r,u]=b.useState({isDirty:!1,isValidating:!1,isLoading:te(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},disabled:!1,defaultValues:te(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...Yt(e,()=>u(c=>({...c}))),formState:r});const l=i.current.control;return l._options=e,pe({subject:l._subjects.state,next:c=>{mt(c,l._proxyFormState,l._updateFormState,!0)&&u({...l._formState})}}),b.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),b.useEffect(()=>{if(l._proxyFormState.isDirty){const c=l._getDirty();c!==r.isDirty&&l._subjects.state.next({isDirty:c})}},[l,r.isDirty]),b.useEffect(()=>{e.values&&!se(e.values,t.current)?(l._reset(e.values,l._options.resetOptions),t.current=e.values):l._resetDefaultValues()},[e.values,l]),b.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),i.current.formState=vt(r,l),i.current}function Zt({children:e,onSubmit:i,methods:t}){return at.jsx(Pt,{...t,children:at.jsx("form",{onSubmit:i,children:e})})}Zt.propTypes={children:Ce.node,methods:Ce.object,onSubmit:Ce.func};export{ir as C,Zt as F,xe as a,qt as b,ur as c,f as g,D as s,ar as u};
